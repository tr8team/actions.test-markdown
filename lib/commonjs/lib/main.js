export class App {
    #input;
    #service;
    #io;
    constructor(input, service, io) {
        this.#input = input;
        this.#service = service;
        this.#io = io;
    }
    run() {
        return this.#input
            .retrieve()
            .mapErr((x) => [x])
            .andThen((x) => this.#service.render(x))
            .run((o) => {
            this.#io.set("currentMarkdown", o.currentMarkdown);
            this.#io.set("historyMarkdown", o.historyMarkdown);
            this.#io.set("badges", o.badges);
        })
            .err();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFLQSxNQUFNLE9BQU8sR0FBRztJQUNMLE1BQU0sQ0FBaUI7SUFDdkIsUUFBUSxDQUFnQjtJQUV4QixHQUFHLENBQVc7SUFFdkIsWUFBWSxLQUFxQixFQUFFLE9BQXNCLEVBQUUsRUFBWTtRQUNyRSxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNwQixJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQztRQUN4QixJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztJQUNoQixDQUFDO0lBRUQsR0FBRztRQUNELE9BQU8sSUFBSSxDQUFDLE1BQU07YUFDZixRQUFRLEVBQUU7YUFDVixNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDbEIsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUN2QyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUNULElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUNuRCxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDbkQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNuQyxDQUFDLENBQUM7YUFDRCxHQUFHLEVBQUUsQ0FBQztJQUNYLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElucHV0UmV0cmlldmVyIH0gZnJvbSBcIi4vaW50ZXJmYWNlL2lucHV0LXJldHJpZXZlci5qc1wiO1xuaW1wb3J0IHsgUmVuZGVyU2VydmljZSB9IGZyb20gXCIuL2ludGVyZmFjZS9zZXJ2aWNlLmpzXCI7XG5pbXBvcnQgeyBPcHRpb24gfSBmcm9tIFwiLi9jb3JlL29wdGlvbi5qc1wiO1xuaW1wb3J0IHsgQWN0aW9uSU8gfSBmcm9tIFwiLi9pbnRlcmZhY2UvaW8uanNcIjtcblxuZXhwb3J0IGNsYXNzIEFwcCB7XG4gIHJlYWRvbmx5ICNpbnB1dDogSW5wdXRSZXRyaWV2ZXI7XG4gIHJlYWRvbmx5ICNzZXJ2aWNlOiBSZW5kZXJTZXJ2aWNlO1xuXG4gIHJlYWRvbmx5ICNpbzogQWN0aW9uSU87XG5cbiAgY29uc3RydWN0b3IoaW5wdXQ6IElucHV0UmV0cmlldmVyLCBzZXJ2aWNlOiBSZW5kZXJTZXJ2aWNlLCBpbzogQWN0aW9uSU8pIHtcbiAgICB0aGlzLiNpbnB1dCA9IGlucHV0O1xuICAgIHRoaXMuI3NlcnZpY2UgPSBzZXJ2aWNlO1xuICAgIHRoaXMuI2lvID0gaW87XG4gIH1cblxuICBydW4oKTogT3B0aW9uPEVycm9yW10+IHtcbiAgICByZXR1cm4gdGhpcy4jaW5wdXRcbiAgICAgIC5yZXRyaWV2ZSgpXG4gICAgICAubWFwRXJyKCh4KSA9PiBbeF0pXG4gICAgICAuYW5kVGhlbigoeCkgPT4gdGhpcy4jc2VydmljZS5yZW5kZXIoeCkpXG4gICAgICAucnVuKChvKSA9PiB7XG4gICAgICAgIHRoaXMuI2lvLnNldChcImN1cnJlbnRNYXJrZG93blwiLCBvLmN1cnJlbnRNYXJrZG93bik7XG4gICAgICAgIHRoaXMuI2lvLnNldChcImhpc3RvcnlNYXJrZG93blwiLCBvLmhpc3RvcnlNYXJrZG93bik7XG4gICAgICAgIHRoaXMuI2lvLnNldChcImJhZGdlc1wiLCBvLmJhZGdlcyk7XG4gICAgICB9KVxuICAgICAgLmVycigpO1xuICB9XG59XG4iXX0=