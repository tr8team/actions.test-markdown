export class App {
    #input;
    #service;
    #io;
    constructor(input, service, io) {
        this.#input = input;
        this.#service = service;
        this.#io = io;
    }
    run() {
        return this.#input
            .retrieve()
            .mapErr((x) => [x])
            .andThen((x) => this.#service.render(x))
            .run((o) => {
            this.#io.set("currentMarkdown", o.currentMarkdown);
            this.#io.set("historyMarkdown", o.historyMarkdown);
        })
            .err();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFLQSxNQUFNLE9BQU8sR0FBRztJQUNMLE1BQU0sQ0FBaUI7SUFDdkIsUUFBUSxDQUFnQjtJQUV4QixHQUFHLENBQVc7SUFFdkIsWUFBWSxLQUFxQixFQUFFLE9BQXNCLEVBQUUsRUFBWTtRQUNyRSxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNwQixJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQztRQUN4QixJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztJQUNoQixDQUFDO0lBRUQsR0FBRztRQUNELE9BQU8sSUFBSSxDQUFDLE1BQU07YUFDZixRQUFRLEVBQUU7YUFDVixNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDbEIsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUN2QyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUNULElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUNuRCxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDckQsQ0FBQyxDQUFDO2FBQ0QsR0FBRyxFQUFFLENBQUM7SUFDWCxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnB1dFJldHJpZXZlciB9IGZyb20gXCIuL2ludGVyZmFjZS9pbnB1dC1yZXRyaWV2ZXIuanNcIjtcbmltcG9ydCB7IFJlbmRlclNlcnZpY2UgfSBmcm9tIFwiLi9pbnRlcmZhY2Uvc2VydmljZS5qc1wiO1xuaW1wb3J0IHsgT3B0aW9uIH0gZnJvbSBcIi4vY29yZS9vcHRpb24uanNcIjtcbmltcG9ydCB7IEFjdGlvbklPIH0gZnJvbSBcIi4vaW50ZXJmYWNlL2lvLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBBcHAge1xuICByZWFkb25seSAjaW5wdXQ6IElucHV0UmV0cmlldmVyO1xuICByZWFkb25seSAjc2VydmljZTogUmVuZGVyU2VydmljZTtcblxuICByZWFkb25seSAjaW86IEFjdGlvbklPO1xuXG4gIGNvbnN0cnVjdG9yKGlucHV0OiBJbnB1dFJldHJpZXZlciwgc2VydmljZTogUmVuZGVyU2VydmljZSwgaW86IEFjdGlvbklPKSB7XG4gICAgdGhpcy4jaW5wdXQgPSBpbnB1dDtcbiAgICB0aGlzLiNzZXJ2aWNlID0gc2VydmljZTtcbiAgICB0aGlzLiNpbyA9IGlvO1xuICB9XG5cbiAgcnVuKCk6IE9wdGlvbjxFcnJvcltdPiB7XG4gICAgcmV0dXJuIHRoaXMuI2lucHV0XG4gICAgICAucmV0cmlldmUoKVxuICAgICAgLm1hcEVycigoeCkgPT4gW3hdKVxuICAgICAgLmFuZFRoZW4oKHgpID0+IHRoaXMuI3NlcnZpY2UucmVuZGVyKHgpKVxuICAgICAgLnJ1bigobykgPT4ge1xuICAgICAgICB0aGlzLiNpby5zZXQoXCJjdXJyZW50TWFya2Rvd25cIiwgby5jdXJyZW50TWFya2Rvd24pO1xuICAgICAgICB0aGlzLiNpby5zZXQoXCJoaXN0b3J5TWFya2Rvd25cIiwgby5oaXN0b3J5TWFya2Rvd24pO1xuICAgICAgfSlcbiAgICAgIC5lcnIoKTtcbiAgfVxufVxuIl19
