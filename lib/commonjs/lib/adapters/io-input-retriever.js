import { Some } from "../core/option.js";
class IoInputRetriever {
    #io;
    #historyEntryValidator;
    #historyValidator;
    constructor(io, historyEntryValidator, historyValidator) {
        this.#io = io;
        this.#historyEntryValidator = historyEntryValidator;
        this.#historyValidator = historyValidator;
    }
    retrieve() {
        const current = this.#io.getObject("current", Some(this.#historyEntryValidator));
        const history = this.#io.getObject("history", Some(this.#historyValidator));
        const a = async () => {
            const c = await current.native();
            const h = await history.native();
            console.log(c, h);
        };
        a();
        return current.andThen((c) => history.map((h) => ({ current: c, history: h })));
    }
}
export { IoInputRetriever };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW8taW5wdXQtcmV0cmlldmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2xpYi9hZGFwdGVycy9pby1pbnB1dC1yZXRyaWV2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBS0EsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRXpDLE1BQU0sZ0JBQWdCO0lBQ1gsR0FBRyxDQUFXO0lBRWQsc0JBQXNCLENBQTBCO0lBRWhELGlCQUFpQixDQUFxQjtJQUUvQyxZQUNFLEVBQVksRUFDWixxQkFBOEMsRUFDOUMsZ0JBQW9DO1FBRXBDLElBQUksQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDO1FBQ2QsSUFBSSxDQUFDLHNCQUFzQixHQUFHLHFCQUFxQixDQUFDO1FBQ3BELElBQUksQ0FBQyxpQkFBaUIsR0FBRyxnQkFBZ0IsQ0FBQztJQUM1QyxDQUFDO0lBRUQsUUFBUTtRQUNOLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUNoQyxTQUFTLEVBQ1QsSUFBSSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUNsQyxDQUFDO1FBR0YsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO1FBRTVFLE1BQU0sQ0FBQyxHQUFHLEtBQUssSUFBSSxFQUFFO1lBQ25CLE1BQU0sQ0FBQyxHQUFHLE1BQU0sT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ2pDLE1BQU0sQ0FBQyxHQUFHLE1BQU0sT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ2pDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25CLENBQUMsQ0FBQTtRQUVELENBQUMsRUFBRSxDQUFBO1FBSUgsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FDM0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQ2hCLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUM3QixDQUNGLENBQUM7SUFDSixDQUFDO0NBQ0Y7QUFFRCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElucHV0UmV0cmlldmVyIH0gZnJvbSBcIi4uL2ludGVyZmFjZS9pbnB1dC1yZXRyaWV2ZXIuanNcIjtcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gXCIuLi9jb3JlL3Jlc3VsdC5qc1wiO1xuaW1wb3J0IHsgQWN0aW9uSW5wdXQsIEhpc3RvcnksIEhpc3RvcnlFbnRyeSB9IGZyb20gXCIuLi9pbnB1dC5qc1wiO1xuaW1wb3J0IHsgQWN0aW9uSU8gfSBmcm9tIFwiLi4vaW50ZXJmYWNlL2lvLmpzXCI7XG5pbXBvcnQgeyBWYWxpZGF0b3IgfSBmcm9tIFwiLi4vaW50ZXJmYWNlL3ZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgU29tZSB9IGZyb20gXCIuLi9jb3JlL29wdGlvbi5qc1wiO1xuXG5jbGFzcyBJb0lucHV0UmV0cmlldmVyIGltcGxlbWVudHMgSW5wdXRSZXRyaWV2ZXIge1xuICByZWFkb25seSAjaW86IEFjdGlvbklPO1xuXG4gIHJlYWRvbmx5ICNoaXN0b3J5RW50cnlWYWxpZGF0b3I6IFZhbGlkYXRvcjxIaXN0b3J5RW50cnk+O1xuXG4gIHJlYWRvbmx5ICNoaXN0b3J5VmFsaWRhdG9yOiBWYWxpZGF0b3I8SGlzdG9yeT47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgaW86IEFjdGlvbklPLFxuICAgIGhpc3RvcnlFbnRyeVZhbGlkYXRvcjogVmFsaWRhdG9yPEhpc3RvcnlFbnRyeT4sXG4gICAgaGlzdG9yeVZhbGlkYXRvcjogVmFsaWRhdG9yPEhpc3Rvcnk+XG4gICkge1xuICAgIHRoaXMuI2lvID0gaW87XG4gICAgdGhpcy4jaGlzdG9yeUVudHJ5VmFsaWRhdG9yID0gaGlzdG9yeUVudHJ5VmFsaWRhdG9yO1xuICAgIHRoaXMuI2hpc3RvcnlWYWxpZGF0b3IgPSBoaXN0b3J5VmFsaWRhdG9yO1xuICB9XG5cbiAgcmV0cmlldmUoKTogUmVzdWx0PEFjdGlvbklucHV0LCBFcnJvcj4ge1xuICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLiNpby5nZXRPYmplY3QoXG4gICAgICBcImN1cnJlbnRcIixcbiAgICAgIFNvbWUodGhpcy4jaGlzdG9yeUVudHJ5VmFsaWRhdG9yKVxuICAgICk7XG5cblxuICAgIGNvbnN0IGhpc3RvcnkgPSB0aGlzLiNpby5nZXRPYmplY3QoXCJoaXN0b3J5XCIsIFNvbWUodGhpcy4jaGlzdG9yeVZhbGlkYXRvcikpO1xuXG4gICAgY29uc3QgYSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGMgPSBhd2FpdCBjdXJyZW50Lm5hdGl2ZSgpO1xuICAgICAgY29uc3QgaCA9IGF3YWl0IGhpc3RvcnkubmF0aXZlKCk7XG4gICAgICBjb25zb2xlLmxvZyhjLGgpO1xuICAgIH1cblxuICAgIGEoKVxuXG5cblxuICAgIHJldHVybiBjdXJyZW50LmFuZFRoZW4oKGMpID0+XG4gICAgICBoaXN0b3J5Lm1hcCgoaCkgPT5cbiAgICAgICAgKHsgY3VycmVudDogYywgaGlzdG9yeTogaCB9KVxuICAgICAgKVxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IHsgSW9JbnB1dFJldHJpZXZlciB9O1xuIl19
