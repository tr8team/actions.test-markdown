import { Some } from "../core/option.js";
class IoInputRetriever {
    #io;
    #historyEntryValidator;
    #historyValidator;
    constructor(io, historyEntryValidator, historyValidator) {
        this.#io = io;
        this.#historyEntryValidator = historyEntryValidator;
        this.#historyValidator = historyValidator;
    }
    retrieve() {
        const current = this.#io.getObject("current", Some(this.#historyEntryValidator));
        const history = this.#io.getObject("history", Some(this.#historyValidator));
        return current.andThen((c) => history.map((h) => ({ current: c, history: h })));
    }
}
export { IoInputRetriever };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW8taW5wdXQtcmV0cmlldmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2xpYi9hZGFwdGVycy9pby1pbnB1dC1yZXRyaWV2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBS0EsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRXpDLE1BQU0sZ0JBQWdCO0lBQ1gsR0FBRyxDQUFXO0lBRWQsc0JBQXNCLENBQTBCO0lBRWhELGlCQUFpQixDQUFxQjtJQUUvQyxZQUNFLEVBQVksRUFDWixxQkFBOEMsRUFDOUMsZ0JBQW9DO1FBRXBDLElBQUksQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDO1FBQ2QsSUFBSSxDQUFDLHNCQUFzQixHQUFHLHFCQUFxQixDQUFDO1FBQ3BELElBQUksQ0FBQyxpQkFBaUIsR0FBRyxnQkFBZ0IsQ0FBQztJQUM1QyxDQUFDO0lBRUQsUUFBUTtRQUNOLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUNoQyxTQUFTLEVBQ1QsSUFBSSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUNsQyxDQUFDO1FBQ0YsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO1FBQzVFLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQzNCLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQ2pELENBQUM7SUFDSixDQUFDO0NBQ0Y7QUFFRCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElucHV0UmV0cmlldmVyIH0gZnJvbSBcIi4uL2ludGVyZmFjZS9pbnB1dC1yZXRyaWV2ZXIuanNcIjtcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gXCIuLi9jb3JlL3Jlc3VsdC5qc1wiO1xuaW1wb3J0IHsgQWN0aW9uSW5wdXQsIEhpc3RvcnksIEhpc3RvcnlFbnRyeSB9IGZyb20gXCIuLi9pbnB1dC5qc1wiO1xuaW1wb3J0IHsgQWN0aW9uSU8gfSBmcm9tIFwiLi4vaW50ZXJmYWNlL2lvLmpzXCI7XG5pbXBvcnQgeyBWYWxpZGF0b3IgfSBmcm9tIFwiLi4vaW50ZXJmYWNlL3ZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgU29tZSB9IGZyb20gXCIuLi9jb3JlL29wdGlvbi5qc1wiO1xuXG5jbGFzcyBJb0lucHV0UmV0cmlldmVyIGltcGxlbWVudHMgSW5wdXRSZXRyaWV2ZXIge1xuICByZWFkb25seSAjaW86IEFjdGlvbklPO1xuXG4gIHJlYWRvbmx5ICNoaXN0b3J5RW50cnlWYWxpZGF0b3I6IFZhbGlkYXRvcjxIaXN0b3J5RW50cnk+O1xuXG4gIHJlYWRvbmx5ICNoaXN0b3J5VmFsaWRhdG9yOiBWYWxpZGF0b3I8SGlzdG9yeT47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgaW86IEFjdGlvbklPLFxuICAgIGhpc3RvcnlFbnRyeVZhbGlkYXRvcjogVmFsaWRhdG9yPEhpc3RvcnlFbnRyeT4sXG4gICAgaGlzdG9yeVZhbGlkYXRvcjogVmFsaWRhdG9yPEhpc3Rvcnk+XG4gICkge1xuICAgIHRoaXMuI2lvID0gaW87XG4gICAgdGhpcy4jaGlzdG9yeUVudHJ5VmFsaWRhdG9yID0gaGlzdG9yeUVudHJ5VmFsaWRhdG9yO1xuICAgIHRoaXMuI2hpc3RvcnlWYWxpZGF0b3IgPSBoaXN0b3J5VmFsaWRhdG9yO1xuICB9XG5cbiAgcmV0cmlldmUoKTogUmVzdWx0PEFjdGlvbklucHV0LCBFcnJvcj4ge1xuICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLiNpby5nZXRPYmplY3QoXG4gICAgICBcImN1cnJlbnRcIixcbiAgICAgIFNvbWUodGhpcy4jaGlzdG9yeUVudHJ5VmFsaWRhdG9yKVxuICAgICk7XG4gICAgY29uc3QgaGlzdG9yeSA9IHRoaXMuI2lvLmdldE9iamVjdChcImhpc3RvcnlcIiwgU29tZSh0aGlzLiNoaXN0b3J5VmFsaWRhdG9yKSk7XG4gICAgcmV0dXJuIGN1cnJlbnQuYW5kVGhlbigoYykgPT5cbiAgICAgIGhpc3RvcnkubWFwKChoKSA9PiAoeyBjdXJyZW50OiBjLCBoaXN0b3J5OiBoIH0pKVxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IHsgSW9JbnB1dFJldHJpZXZlciB9O1xuIl19
