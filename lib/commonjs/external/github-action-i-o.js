import { getInput, setFailed, setOutput } from "@actions/core";
import { parseJSON } from "../lib/util.js";
import { Ok } from "../lib/core/result.js";
class GithubActionIO {
    get(key) {
        return getInput(key);
    }
    getObject(key, validator) {
        const raw = this.get(key);
        return parseJSON(raw).andThen((j) => validator.asResult({
            none: () => Ok(j),
            some: (v) => v.parse(j),
        }));
    }
    set(key, value) {
        setOutput(key, value);
    }
    setObject(key, value) {
        setOutput(key, JSON.stringify(value));
    }
    /* istanbul ignore next */
    setFail(err) {
        setFailed(err);
    }
}
export { GithubActionIO };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2l0aHViLWFjdGlvbi1pLW8uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZXh0ZXJuYWwvZ2l0aHViLWFjdGlvbi1pLW8udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQy9ELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUUzQyxPQUFPLEVBQUUsRUFBRSxFQUFVLE1BQU0sdUJBQXVCLENBQUM7QUFHbkQsTUFBTSxjQUFjO0lBQ2xCLEdBQUcsQ0FBQyxHQUFXO1FBQ2IsT0FBTyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDdkIsQ0FBQztJQUVELFNBQVMsQ0FBSSxHQUFXLEVBQUUsU0FBK0I7UUFDdkQsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMxQixPQUFPLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUNsQyxTQUFTLENBQUMsUUFBUSxDQUFDO1lBQ2pCLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFxQjtZQUNyQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1NBQ3hCLENBQUMsQ0FDSCxDQUFDO0lBQ0osQ0FBQztJQUVELEdBQUcsQ0FBQyxHQUFXLEVBQUUsS0FBYTtRQUM1QixTQUFTLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxTQUFTLENBQUMsR0FBVyxFQUFFLEtBQWE7UUFDbEMsU0FBUyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVELDBCQUEwQjtJQUMxQixPQUFPLENBQUMsR0FBbUI7UUFDekIsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pCLENBQUM7Q0FDRjtBQUVELE9BQU8sRUFBRSxjQUFjLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFjdGlvbklPIH0gZnJvbSBcIi4uL2xpYi9pbnRlcmZhY2UvaW8uanNcIjtcbmltcG9ydCB7IGdldElucHV0LCBzZXRGYWlsZWQsIHNldE91dHB1dCB9IGZyb20gXCJAYWN0aW9ucy9jb3JlXCI7XG5pbXBvcnQgeyBwYXJzZUpTT04gfSBmcm9tIFwiLi4vbGliL3V0aWwuanNcIjtcbmltcG9ydCB7IFZhbGlkYXRvciB9IGZyb20gXCIuLi9saWIvaW50ZXJmYWNlL3ZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgT2ssIFJlc3VsdCB9IGZyb20gXCIuLi9saWIvY29yZS9yZXN1bHQuanNcIjtcbmltcG9ydCB7IE9wdGlvbiB9IGZyb20gXCIuLi9saWIvY29yZS9vcHRpb24uanNcIjtcblxuY2xhc3MgR2l0aHViQWN0aW9uSU8gaW1wbGVtZW50cyBBY3Rpb25JTyB7XG4gIGdldChrZXk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGdldElucHV0KGtleSk7XG4gIH1cblxuICBnZXRPYmplY3Q8VD4oa2V5OiBzdHJpbmcsIHZhbGlkYXRvcjogT3B0aW9uPFZhbGlkYXRvcjxUPj4pOiBSZXN1bHQ8VCwgRXJyb3I+IHtcbiAgICBjb25zdCByYXcgPSB0aGlzLmdldChrZXkpO1xuICAgIHJldHVybiBwYXJzZUpTT04ocmF3KS5hbmRUaGVuKChqKSA9PlxuICAgICAgdmFsaWRhdG9yLmFzUmVzdWx0KHtcbiAgICAgICAgbm9uZTogKCkgPT4gT2soaikgYXMgUmVzdWx0PFQsIEVycm9yPixcbiAgICAgICAgc29tZTogKHYpID0+IHYucGFyc2UoaiksXG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBzZXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBzZXRPdXRwdXQoa2V5LCB2YWx1ZSk7XG4gIH1cblxuICBzZXRPYmplY3Qoa2V5OiBzdHJpbmcsIHZhbHVlOiBvYmplY3QpOiB2b2lkIHtcbiAgICBzZXRPdXRwdXQoa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgc2V0RmFpbChlcnI6IHN0cmluZyB8IEVycm9yKTogdm9pZCB7XG4gICAgc2V0RmFpbGVkKGVycik7XG4gIH1cbn1cblxuZXhwb3J0IHsgR2l0aHViQWN0aW9uSU8gfTtcbiJdfQ==